<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qu·∫£n L√Ω Ng∆∞·ªùi D√πng</title>
    <link rel="stylesheet" href="/stylesheets/style.css">
</head>
<body>
<%- include('../partials/navbar') %>
<div class="container">
    <h1>üë• Qu·∫£n l√Ω ng∆∞·ªùi d√πng</h1>
    <a href="/users/add" class="add-btn">‚ûï Th√™m ng∆∞·ªùi d√πng</a>

    <table>
        <thead>
            <tr>
                <th>Username</th>
                <th>Role</th>
                <th>Ng√†y t·∫°o</th>
                <th>H√†nh ƒë·ªông</th>
            </tr>
        </thead>
        <tbody>
            <% users.forEach(u => { %>
                <tr>
                    <td><strong><%= u.username %></strong></td>
                    <td>
                        <span style="
                            padding: 4px 12px;
                            border-radius: 20px;
                            font-size: 12px;
                            font-weight: 600;
                            background: <%= u.role === 'admin' ? '#e3f2fd' : '#f3e5f5' %>;
                            color: <%= u.role === 'admin' ? '#1565c0' : '#7b1fa2' %>;
                        ">
                            <%= u.role === 'admin' ? 'üëë Admin' : 'üë§ Staff' %>
                        </span>
                    </td>
                    <td><%= u.createdAt ? new Date(u.createdAt).toLocaleDateString('vi-VN') : '-' %></td>
                    <td>
                        <a class="action-link" href="/users/edit/<%= u.userId %>">‚úèÔ∏è S·ª≠a</a>
                        <% if (currentUser && currentUser.userId !== u.userId) { %>
                            <form action="/users/delete/<%= u.userId %>" method="post" style="display:inline">
                                <button type="submit" onclick="return confirm('B·∫°n ch·∫Øc ch·∫Øn mu·ªën x√≥a user n√†y?')">üóëÔ∏è X√≥a</button>
                            </form>
                        <% } %>
                    </td>
                </tr>
            <% }) %>
        </tbody>
    </table>
</div>
</body>
</html>
